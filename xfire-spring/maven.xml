<project default="jar:install" xmlns:ant="jelly:ant" xmlns:maven="jelly:maven">

	<ant:taskdef name="mapping" classname="org.apache.xbean.spring.generator.MappingGeneratorTask">
      <ant:classpath>
      	<ant:pathelement path="${maven.build.dest}"/>
      	<ant:pathelement path="${maven.test.dest}"/>
        <path refid="maven.dependency.classpath"/>
      </ant:classpath>
    </ant:taskdef>

	                
	<postGoal name="java:compile">

		<mapping destFile="target/services.xsd"
			     namespace="http://xfire.codehaus.org/config/1.0"
                 srcdir="${basedir}/src/main"
                 metaInfDir="${maven.build.dir}/generated/"/>

		<ant:copy todir="${maven.build.dir}/classes">
		  <ant:fileset dir="${maven.build.dir}/generated/"/>
		</ant:copy>
	</postGoal>
</project>
