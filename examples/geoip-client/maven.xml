<project
  default="jar:install"
  xmlns:j="jelly:core"
  xmlns:ant="jelly:ant"
  xmlns:maven="jelly:maven"  
  xmlns:i="jelly:interaction">

	<!-- START SNIPPET: generate -->
	<goal name="generate-jaxb-client">

		<!-- Setup WSGen classpath and taskdef -->
		<ant:path id="wsgen.path">
			<ant:path refid="maven.dependency.classpath"/>
			<ant:pathelement path="${maven.build.dest}"/>
			<ant:pathelement path="${maven.test.dest}"/>
			<ant:pathelement path="${maven.build.dir}/client-xmlbeans"/>
		</ant:path>

		<ant:taskdef name="wsgen" classname="org.codehaus.xfire.gen.WsGenTask" classpathref="wsgen.path"/>

		<!-- Run the client generator -->
		<wsgen outputDirectory="${maven.build.dir}/client"
  	       wsdl="${basedir}/src/wsdl/geoip.wsdl"
  	       package="net.webservicex.geoip.jaxb"/>

		<!-- Add the client directory to the list of directories to compile -->
		<ant:path id="services" location="${maven.build.dir}/client"/>
		<maven:addPath id="maven.compile.src.set" refid="services"/>
	</goal>
	<!-- END SNIPPET: generate -->

	<preGoal name="java:compile">
		<attainGoal name="generate-jaxb-client"/>
	</preGoal>

</project>