<project default="multiproject:install" xmlns:c="jelly:core" xmlns:maven="jelly:maven" xmlns:ant="jelly:ant">

	<preGoal name="multiproject:projects-init">
		<c:set var="x" value="${xfire.java5}"/>
		<c:choose>
			<c:when test="${x == true}">
				<c:set var="maven.multiproject.excludes" value="project.xml"/>
			</c:when>
			<c:otherwise>
				<ant:echo><![CDATA[
************************************************************
* WARNING!                                                 *
*                                                          *
* Your are running a build without Java 5 modules.         *
*                                                          *
* In order to get Java 5 modules adds "-Dxfire.java5=true" *
* to the maven command line                                *
************************************************************
				]]></ant:echo>
			</c:otherwise>
		</c:choose>
	</preGoal>
	
	<preGoal name="multiproject:site">
		<attainGoal name="multiproject:javadoc"/>
	</preGoal>

	<!-- Makes site:deploy not to run site goal. -->
	<goal name="site:deploy">
		<attainGoal name="site:${maven.site.deploy.method}deploy"/>
	</goal>	


</project>